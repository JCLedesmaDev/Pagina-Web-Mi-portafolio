{"ast":null,"code":"import _slicedToArray from\"D:\\\\Juanchi\\\\Programacion\\\\Practicas realizadas\\\\01-02-22 React y TypeScript - React-portafolio-pwa\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useCallback,useEffect,useMemo,useState}from\"react\";var isInWebApp=window.matchMedia(\"(display-mode: standalone)\").matches;export function useAddToHomeScreenPrompt(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),prompt=_useState2[0],setPrompt=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isReady=_useState4[0],setIsReady=_useState4[1];var _useState5=useState(isInWebApp),_useState6=_slicedToArray(_useState5,2),hasFinishedInstallation=_useState6[0],setHasFinishedInstallation=_useState6[1];var finishInstallation=useCallback(function(){setHasFinishedInstallation(true);},[]);var promptToInstall=useCallback(function(){if(prompt){prompt.prompt();prompt.userChoice.then(function(choiceResult){if(choiceResult.outcome===\"accepted\"){finishInstallation();}});return;}return Promise.reject(new Error('Tried installing before browser sent \"beforeinstallprompt\" event'));},[finishInstallation,prompt]);useEffect(function(){if(prompt){setIsReady(true);}},[prompt]);useEffect(function(){function ready(e){e.preventDefault();setPrompt(e);}window.addEventListener(\"beforeinstallprompt\",ready);return function(){window.removeEventListener(\"beforeinstallprompt\",ready);};},[]);return useMemo(function(){return{isReady:isReady,promptToInstall:promptToInstall,hasFinishedInstallation:hasFinishedInstallation,finishInstallation:finishInstallation};},[isReady,promptToInstall,hasFinishedInstallation,finishInstallation]);}","map":{"version":3,"sources":["D:/Juanchi/Programacion/Practicas realizadas/01-02-22 React y TypeScript - React-portafolio-pwa/src/Hooks/useAddToHomeScreenPrompt.tsx"],"names":["useCallback","useEffect","useMemo","useState","isInWebApp","window","matchMedia","matches","useAddToHomeScreenPrompt","prompt","setPrompt","isReady","setIsReady","hasFinishedInstallation","setHasFinishedInstallation","finishInstallation","promptToInstall","userChoice","then","choiceResult","outcome","Promise","reject","Error","ready","e","preventDefault","addEventListener","removeEventListener"],"mappings":"+LAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,OAAjC,CAA0CC,QAA1C,KAA0D,OAA1D,CAWA,GAAMC,CAAAA,UAAU,CAAGC,MAAM,CAACC,UAAP,CAAkB,4BAAlB,EAAgDC,OAAnE,CAEA,MAAO,SAASC,CAAAA,wBAAT,EAAoC,CACzC,cAA4BL,QAAQ,CAAmC,IAAnC,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eACA,eAA8BP,QAAQ,CAAC,KAAD,CAAtC,yCAAOQ,OAAP,eAAgBC,UAAhB,eACA,eACET,QAAQ,CAACC,UAAD,CADV,yCAAOS,uBAAP,eAAgCC,0BAAhC,eAGA,GAAMC,CAAAA,kBAAkB,CAAGf,WAAW,CAAC,UAAY,CACjDc,0BAA0B,CAAC,IAAD,CAA1B,CACD,CAFqC,CAEnC,EAFmC,CAAtC,CAIA,GAAME,CAAAA,eAAe,CAAGhB,WAAW,CACjC,UAAY,CACV,GAAIS,MAAJ,CAAY,CACVA,MAAM,CAACA,MAAP,GACAA,MAAM,CAACQ,UAAP,CAAkBC,IAAlB,CAAuB,SAAUC,YAAV,CAAwB,CAC7C,GAAIA,YAAY,CAACC,OAAb,GAAyB,UAA7B,CAAyC,CACvCL,kBAAkB,GACnB,CACF,CAJD,EAKA,OACD,CAED,MAAOM,CAAAA,OAAO,CAACC,MAAR,CACL,GAAIC,CAAAA,KAAJ,CACE,kEADF,CADK,CAAP,CAKD,CAjBgC,CAkBjC,CAACR,kBAAD,CAAqBN,MAArB,CAlBiC,CAAnC,CAqBAR,SAAS,CACP,UAAY,CACV,GAAIQ,MAAJ,CAAY,CACVG,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CALM,CAMP,CAACH,MAAD,CANO,CAAT,CASAR,SAAS,CAAC,UAAY,CACpB,QAASuB,CAAAA,KAAT,CAAeC,CAAf,CAA6C,CAC3CA,CAAC,CAACC,cAAF,GACAhB,SAAS,CAACe,CAAD,CAAT,CACD,CAEDpB,MAAM,CAACsB,gBAAP,CAAwB,qBAAxB,CAA+CH,KAA/C,EAEA,MAAO,WAAY,CACjBnB,MAAM,CAACuB,mBAAP,CAA2B,qBAA3B,CAAkDJ,KAAlD,EACD,CAFD,CAGD,CAXQ,CAWN,EAXM,CAAT,CAaA,MAAOtB,CAAAA,OAAO,CACZ,iBAAO,CACLS,OAAO,CAAPA,OADK,CAELK,eAAe,CAAfA,eAFK,CAGLH,uBAAuB,CAAvBA,uBAHK,CAILE,kBAAkB,CAAlBA,kBAJK,CAAP,EADY,CAOZ,CAACJ,OAAD,CAAUK,eAAV,CAA2BH,uBAA3B,CAAoDE,kBAApD,CAPY,CAAd,CASD","sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\r\n\r\ninterface IBeforeInstallPromptEvent extends Event {\r\n  readonly platforms: string[];\r\n  readonly userChoice: Promise<{\r\n    outcome: \"accepted\" | \"dismissed\";\r\n    platform: string;\r\n  }>;\r\n  prompt(): Promise<void>;\r\n}\r\n\r\nconst isInWebApp = window.matchMedia(\"(display-mode: standalone)\").matches;\r\n\r\nexport function useAddToHomeScreenPrompt() {\r\n  const [prompt, setPrompt] = useState<IBeforeInstallPromptEvent | null>(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [hasFinishedInstallation, setHasFinishedInstallation] =\r\n    useState(isInWebApp);\r\n\r\n  const finishInstallation = useCallback(function () {\r\n    setHasFinishedInstallation(true);\r\n  }, []);\r\n\r\n  const promptToInstall = useCallback(\r\n    function () {\r\n      if (prompt) {\r\n        prompt.prompt();\r\n        prompt.userChoice.then(function (choiceResult) {\r\n          if (choiceResult.outcome === \"accepted\") {\r\n            finishInstallation();\r\n          }\r\n        });\r\n        return;\r\n      }\r\n\r\n      return Promise.reject(\r\n        new Error(\r\n          'Tried installing before browser sent \"beforeinstallprompt\" event'\r\n        )\r\n      );\r\n    },\r\n    [finishInstallation, prompt]\r\n  );\r\n\r\n  useEffect(\r\n    function () {\r\n      if (prompt) {\r\n        setIsReady(true);\r\n      }\r\n    },\r\n    [prompt]\r\n  );\r\n\r\n  useEffect(function () {\r\n    function ready(e: IBeforeInstallPromptEvent) {\r\n      e.preventDefault();\r\n      setPrompt(e);\r\n    }\r\n\r\n    window.addEventListener(\"beforeinstallprompt\", ready as any);\r\n\r\n    return function () {\r\n      window.removeEventListener(\"beforeinstallprompt\", ready as any);\r\n    };\r\n  }, []);\r\n\r\n  return useMemo(\r\n    () => ({\r\n      isReady,\r\n      promptToInstall,\r\n      hasFinishedInstallation,\r\n      finishInstallation,\r\n    }),\r\n    [isReady, promptToInstall, hasFinishedInstallation, finishInstallation]\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}