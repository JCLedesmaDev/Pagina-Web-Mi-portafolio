{"ast":null,"code":"import _slicedToArray from\"D:\\\\Juanchi\\\\Programacion\\\\Practicas realizadas\\\\01-02-22 React y TypeScript - React-portafolio-pwa\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useCallback,useEffect,useMemo,useState}from\"react\";var isInWebApp=window.matchMedia(\"(display-mode: standalone)\").matches;export function useAddToHomeScreenPrompt(){/* CODIGO SACADO DE: https://www.youtube.com/watch?v=3f20qBfACzI\r\n   No entendi su funcionamiento pero anda.\r\n  \r\n    Practicamente lo que hace es: Si al ingresar a la pagina, no tenes \r\n    la app instalada, te aparece una ventanita para isntalar\r\n    caso contrario, si lo tenes instalado, no te aparece nada.\r\n  */var _useState=useState(null),_useState2=_slicedToArray(_useState,2),prompt=_useState2[0],setPrompt=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isReady=_useState4[0],setIsReady=_useState4[1];var _useState5=useState(isInWebApp),_useState6=_slicedToArray(_useState5,2),finishInstallation=_useState6[0],setFinishInstallation=_useState6[1];// Hace aparecer la ventana para isntalar\nvar promptToInstall=useCallback(function(){if(prompt){prompt.prompt();prompt.userChoice.then(function(choiceResult){if(choiceResult.outcome===\"accepted\"){setFinishInstallation(true);}});return;}return Promise.reject(new Error('Tried installing before browser sent \"beforeinstallprompt\" event'));},[prompt]);useEffect(function(){if(prompt){setIsReady(true);}},[prompt]);function ready(e){e.preventDefault();setPrompt(e);}useEffect(function(){window.addEventListener(\"beforeinstallprompt\",ready);return function(){window.removeEventListener(\"beforeinstallprompt\",ready);};},[]);return useMemo(function(){return{isReady:isReady,promptToInstall:promptToInstall,finishInstallation:finishInstallation};},[isReady,promptToInstall,finishInstallation]);}","map":{"version":3,"sources":["D:/Juanchi/Programacion/Practicas realizadas/01-02-22 React y TypeScript - React-portafolio-pwa/src/Hooks/useAddToHomeScreenPrompt.tsx"],"names":["useCallback","useEffect","useMemo","useState","isInWebApp","window","matchMedia","matches","useAddToHomeScreenPrompt","prompt","setPrompt","isReady","setIsReady","finishInstallation","setFinishInstallation","promptToInstall","userChoice","then","choiceResult","outcome","Promise","reject","Error","ready","e","preventDefault","addEventListener","removeEventListener"],"mappings":"+LAAA,OAASA,WAAT,CAAsBC,SAAtB,CAAiCC,OAAjC,CAA0CC,QAA1C,KAA0D,OAA1D,CAWA,GAAMC,CAAAA,UAAU,CAAGC,MAAM,CAACC,UAAP,CAAkB,4BAAlB,EAAgDC,OAAnE,CAEA,MAAO,SAASC,CAAAA,wBAAT,EAAoC,CACzC;AACF;AACA;AACA;AACA;AACA;AACA,IAEE,cAA4BL,QAAQ,CAAmC,IAAnC,CAApC,wCAAOM,MAAP,eAAeC,SAAf,eACA,eAA8BP,QAAQ,CAAC,KAAD,CAAtC,yCAAOQ,OAAP,eAAgBC,UAAhB,eACA,eAAoDT,QAAQ,CAACC,UAAD,CAA5D,yCAAOS,kBAAP,eAA2BC,qBAA3B,eAEA;AACA,GAAMC,CAAAA,eAAe,CAAGf,WAAW,CAAC,UAAM,CACxC,GAAIS,MAAJ,CAAY,CACVA,MAAM,CAACA,MAAP,GACAA,MAAM,CAACO,UAAP,CAAkBC,IAAlB,CAAuB,SAACC,YAAD,CAAkB,CACvC,GAAIA,YAAY,CAACC,OAAb,GAAyB,UAA7B,CAAyC,CACvCL,qBAAqB,CAAC,IAAD,CAArB,CACD,CACF,CAJD,EAKA,OACD,CAED,MAAOM,CAAAA,OAAO,CAACC,MAAR,CACL,GAAIC,CAAAA,KAAJ,CACE,kEADF,CADK,CAAP,CAKD,CAhBkC,CAgBhC,CAACb,MAAD,CAhBgC,CAAnC,CAkBAR,SAAS,CAAC,UAAM,CACd,GAAIQ,MAAJ,CAAY,CACVG,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAJQ,CAIN,CAACH,MAAD,CAJM,CAAT,CAMA,QAASc,CAAAA,KAAT,CAAeC,CAAf,CAA6C,CAC3CA,CAAC,CAACC,cAAF,GACAf,SAAS,CAACc,CAAD,CAAT,CACD,CAEDvB,SAAS,CAAC,UAAM,CACdI,MAAM,CAACqB,gBAAP,CAAwB,qBAAxB,CAA+CH,KAA/C,EAEA,MAAO,WAAY,CACjBlB,MAAM,CAACsB,mBAAP,CAA2B,qBAA3B,CAAkDJ,KAAlD,EACD,CAFD,CAGD,CANQ,CAMN,EANM,CAAT,CAQA,MAAOrB,CAAAA,OAAO,CACZ,iBAAO,CACLS,OAAO,CAAPA,OADK,CAELI,eAAe,CAAfA,eAFK,CAGLF,kBAAkB,CAAlBA,kBAHK,CAAP,EADY,CAMZ,CAACF,OAAD,CAAUI,eAAV,CAA2BF,kBAA3B,CANY,CAAd,CAQD","sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\r\n\r\ninterface IBeforeInstallPromptEvent extends Event {\r\n  readonly platforms: string[];\r\n  readonly userChoice: Promise<{\r\n    outcome: \"accepted\" | \"dismissed\";\r\n    platform: string;\r\n  }>;\r\n  prompt(): Promise<void>;\r\n}\r\n\r\nconst isInWebApp = window.matchMedia(\"(display-mode: standalone)\").matches;\r\n\r\nexport function useAddToHomeScreenPrompt() {\r\n  /* CODIGO SACADO DE: https://www.youtube.com/watch?v=3f20qBfACzI\r\n   No entendi su funcionamiento pero anda.\r\n  \r\n    Practicamente lo que hace es: Si al ingresar a la pagina, no tenes \r\n    la app instalada, te aparece una ventanita para isntalar\r\n    caso contrario, si lo tenes instalado, no te aparece nada.\r\n  */\r\n\r\n  const [prompt, setPrompt] = useState<IBeforeInstallPromptEvent | null>(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [finishInstallation, setFinishInstallation] = useState(isInWebApp);\r\n\r\n  // Hace aparecer la ventana para isntalar\r\n  const promptToInstall = useCallback(() => {\r\n    if (prompt) {\r\n      prompt.prompt();\r\n      prompt.userChoice.then((choiceResult) => {\r\n        if (choiceResult.outcome === \"accepted\") {\r\n          setFinishInstallation(true);\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    return Promise.reject(\r\n      new Error(\r\n        'Tried installing before browser sent \"beforeinstallprompt\" event'\r\n      )\r\n    );\r\n  }, [prompt]);\r\n\r\n  useEffect(() => {\r\n    if (prompt) {\r\n      setIsReady(true);\r\n    }\r\n  }, [prompt]);\r\n\r\n  function ready(e: IBeforeInstallPromptEvent) {\r\n    e.preventDefault();\r\n    setPrompt(e);\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"beforeinstallprompt\", ready as any);\r\n\r\n    return function () {\r\n      window.removeEventListener(\"beforeinstallprompt\", ready as any);\r\n    };\r\n  }, []);\r\n\r\n  return useMemo(\r\n    () => ({\r\n      isReady,\r\n      promptToInstall,\r\n      finishInstallation,\r\n    }),\r\n    [isReady, promptToInstall, finishInstallation]\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}